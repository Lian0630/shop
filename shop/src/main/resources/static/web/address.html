<!DOCTYPE html>
<html>

	<head>

		<meta charset="utf-8" />
		<title>連的交易所</title>
	<!--核心文件-->
	<script src="../js/jquery-1.9.1.min.js"></script>
	<script src="../js/rightBox.js" type="text/javascript"></script>
	<link rel="stylesheet" href="../css/projectAll.css">
	<script src="../js/header.js" type="text/javascript"></script>
	<script src="../js/footer.js" type="text/javascript"></script>
	<link rel="stylesheet" href="../css/header.css">
	<link rel="stylesheet" href="../css/footer.css">
	
		
	<style type="text/css">
		.login-title{display: none;}
	

		.top-item{position: relative;min-height: 1px;padding-right: 15px;padding-left: 15px;}
		.top-item {color: #777777;line-height: 40px;}	
		
		.mid{ background-image:url(../images/index/bg2.jpg);background-repeat:no-repeat;width:1500px; height:600px;margin:0 auto;overflow: hidden;}
		.panel{height: 200px;
				width: 900px;
				margin: 10px 10px 0 0;
				border-radius: 10px;
				padding: 8px;
				background-color: rgba(255,255,255,0.8);
				border-radius:100px;
				margin: 0 auto;
				margin-top:100px;
				}
		.panel-body{margin-left:200px;margin-top:50px;}
		.nav{margin-top: 50px;}
		
		
		.table-striped{width:600px;}
		
	</style>
	</head>

	<body>
		<!-- 右側懸浮 -->
		<div class="right_box">
			
		</div>
		<!-- 右側懸浮結束 -->
	
		<!--頭部-->
		<header class="header">
			<!--logo-->
			<div>
				<a href="index.html">
					<img src="../images/index/logo.png" />
				</a>
			</div>
			

		</header>
		<!--頭部结束-->
		
		
		<div class="mid">
			<div class="panel">
				<ul class="nav">
					<li ><a href="password.html" style="text-decoration:none;color:blue">修改密碼</a></li>
					<li><a href="userdata.html" style="text-decoration:none;color:blue">個人資料</a></li>
					<li><a href="upload.html" style="text-decoration:none;color:blue">上傳頭像</a></li>
					<li class="active"><a href="#" style="text-decoration:none;color:blue">收貨管理</a></li>
				</ul>
				<div class="panel-body">
					<!--地址顯示-->
					<table class="table-striped">
						<caption>收貨地址列表</caption>
						<thead>
							<tr>
								<th>地址類型</th>
								<th>收貨人姓名</th>
								<th>詳細地址</th>
								<th>聯繫电话</th>
								<th colspan="3">操作</th>
								
							</tr>
						</thead>
						<tbody id="list">
							<tr>
								<td>家</td>
								<td>八戒</td>
								<td>北京市房山区高老庄3排6号</td>
								<td>1380***1234</td>
								<td><a><spa></span> 修改</a></td>
								<td><a><span></span> 删除</a></td>
								<td><a>設為默認</a></td>
								
							</tr>
						</tbody>
					</table>
					<a href="addAddress.html" style="text-decoration:none;"><span></span>新增收貨地址</a>
				</div>
			</div>

		</div>

		<!--尾部-->
		<footer class="footer">
			<!-- 安全保護 銀行匯款 客戶服務 -->
			<div class="foot">			
				<span class="foot-left">
					<a href="customerService.html">
						<img src="../images/index/reg1.jpg" width="20%" height="20%">
					</a>
					安全保護
				</span>
				<span class="foot-mid">
					<a href="customerService.html">
						<img src="../images/index/reg2.jpg" width="20%" height="20%">
					</a>	
					銀行匯款
				</span>			
				<span class="foot-right">
					<a href="customerService.html">
						<img src="../images/index/reg3.jpg" width="20%" height="20%">
					</a>
					客戶服務
				</span>
			</div>
			<!--公告 常見問題 聯繫我們-->
			<div class="bottom" >

				<div class="bottom-mid" >
					<div>
						<ul>
							<li><h5>公告</h5></li>
							<li><a href="customerAnnouncement.html" style="color:white;text-decoration:none;">新手指南</a></li>
							<li><a href="customerAnnouncement.html" style="color:white;text-decoration:none;">服務保障</a></li>
							<li><a href="customerAnnouncement.html" style="color:white;text-decoration:none;">常見問題</a></li>
						</ul>
					</div>
					<div>
						<ul>
							<li><h5>常見問題</h5></li>
							<li><a href="customerProblem.html" style="color:white;text-decoration:none;">個人戶實名驗證審核流程</a></li>
							<li><a href="customerProblem.html" style="color:white;text-decoration:none;">有哪些現行支付方法可以購買數位資產？</a></li>
							<li><a href="customerProblem.html" style="color:white;text-decoration:none;">如何購買數位資產？</a></li>
						</ul>
					</div>
					<div>
						<ul>
							<li><h5>聯繫我們</h5></li>
							<li>線上客服：週一至週五(例假日除外)上午十點至下午六點</li>
							<li>電話:(02)2722-xxxx</li>
							<li>信箱：sky79316@gmail.com</li>
							<li>門市地址：台北市中正區八德路X段 XXX 號</li>
						</ul>
					</div>
				</div>
			</div>
			<!-- 頁面最下 -->
			<div class="bottom-down" align="center">
				<i>關於LianExchanges&nbsp/&nbsp使用條款&nbsp/&nbsp隱私權政策&nbsp/&nbsp常見問題</i>
			</div>

		</footer>
		<!--頁面结束-->
	<script type="text/javascript">
	//當頁面完成加載時
	$(document).ready(function(){
		//加載當前用戶的收貨地址列表
		showList();
	});
	function showList(){
		var url = "../address/list";
		$.ajax({
			"url":url,
			"type":"POST",
			"dataType":"json",
			"success":function(json){
				$("#list").empty();
				
				var list = json.data;
				for(var i=0; i<list.length;i++){
					console.log(list[i].name+","+list[i].district)
					var html = '<tr>'
						+'<td>#{tag}</td>'
						+'<td>#{name}</td>'
						+'<td>#{district}#{address}</td>'
						+'<td>#{phone}</td>'
						+'<td><a class="btn btn-xs add-del btn-info" href="javascript:deleteById(#{id})"><span class="fa fa-trash-o"></span> 删除</a></td>'
						+'<td><a #{is_default} class="btn btn-xs add-def btn-default" href="javascript:setDefault(#{id})">設為默認</a></td>'
						+'</tr>';
					    
						html = html.replace(/#{id}/g, list[i].id);
						html = html.replace("#{tag}",list[i].tag);
						html = html.replace("#{name}",list[i].name);
						html = html.replace("#{district}",list[i].district);
						html = html.replace("#{address}",list[i].address);
						html = html.replace("#{phone}",list[i].phone);
						if(list[i].isDefault == 1){
							html = html.replace("#{is_default}",'style="display:none"');
						}else{
							html = html.replace("#{is_default}",'');
						}
				
					$("#list").append(html);
				}
			}
		});
	}
	
	function deleteById(id){
		var url = "../address/delete/" + id;
		$.ajax({
			"url":url,
			"type":"GET",
			"dataType":"json",
			"success":function(json){
				if(json.state == 200){
					//成功
					showList();
				}else{
					//失敗
					alert(json.message);
				}
			},
			"error":function(){
				alert("您的登入信息已過期！請重新登入！");
				location.href = "login.html";
			}
		});
	}
	
	function setDefault(id){
		var url = "../address/default/" + id;
		$.ajax({
			"url":url,
			"type":"GET",
			"dataType":"json",
			"success":function(json){
				if(json.state == 200){
					//成功
					showList();
				}else{
					//失敗
					alert(json.message);
				}
			},
			"error":function(){
				alert("您的登入信息已過期！請重新登入！");
				location.href = "login.html";
			}
		});
	}
	</script>	
	</body>

</html>