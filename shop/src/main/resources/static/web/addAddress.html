<!DOCTYPE html>
<html>

	<head>

		<meta charset="utf-8" />
		<title>連的交易所</title>
	<!--核心文件-->
	<script src="../js/jquery-1.9.1.min.js"></script>
	<script src="../js/rightBox.js" type="text/javascript"></script>
	<link rel="stylesheet" href="../css/projectAll.css">
	<script src="../js/header.js" type="text/javascript"></script>
	<script src="../js/footer.js" type="text/javascript"></script>
	<link rel="stylesheet" href="../css/header.css">
	<link rel="stylesheet" href="../css/footer.css">
	
		
	<style type="text/css">
		.login-title{display: none;}
	
	
		.top-item{position: relative;min-height: 1px;padding-right: 15px;padding-left: 15px;}
		.top-item {color: #777777;line-height: 40px;}	
		
		
		.mid{ background-image:url(../images/index/bg2.jpg);background-repeat:no-repeat;width:1500px;  height:600px;margin: 0 auto;overflow: hidden;}
		.panel{height: 500px;
				width: 500px;
				margin: 10px 10px 0 0;
				border-radius: 10px;
				padding: 8px;
				background-color: rgba(255,255,255,0.8);
				border-radius:100px;
				margin: 0 auto;
				margin-top:100px;
				}
		#form-address{margin-left:200px;margin-top:50px;}
		.nav{margin-top: 50px;margin-left: 55px;}
		
	
	
		
	</style>
	</head>

	<body>
		<!-- 右側懸浮 -->
		<div class="right_box">
			
		</div>
		<!-- 右側懸浮結束 -->
		
		<!--頭部-->
		<header class="header">
			<!--logo-->
			<div>
				<a href="index.html">
					<img src="../images/index/logo.png" />
				</a>
			</div>
		</header>
		<!--頭部结束-->
	
		<div class="mid">
			
			<div class="panel">
				<ul class="nav">
					<li><a href="password.html" style="text-decoration:none;color:blue">修改密碼</a></li>
					<li><a href="userdata.html" style="text-decoration:none;color:blue">個人資料</a></li>
					<li><a href="upload.html" style="text-decoration:none;color:blue">上傳頭像</a></li>
					<li class="active"><a href="#" style="text-decoration:none;color:blue">收貨管理</a></li>

				</ul>
				<div class="panel-body">
					<!--新增收货地址表单开始-->
					<form id="form-address" class="form-horizontal" role="form">
						<div class="form-group">
							<label ><span style="color: red;">*</span>收貨人：</label>
							<div >
								<input name="name" type="text" class="form-control" placeholder="请输入收货人姓名">
							</div>
						</div>
						<div class="address_content" data-toggle="distpicker">
							<div class="form-group">
								<label ><span style="color: red;">*</span>省/直辖市：</label>
								<div >
									<select name="province" class="form-control" data-province="---- 選擇省 ----" id="provinces">
										<option value="0">--請選擇--</option>
									</select>
								</div>
								<label><span style="color: red;">*</span>城市：</label>
								<div >
									<select name="city" class="form-control" data-city="---- 選擇市----" id="cities">
										<option value="0">--請選擇--</option>
									</select>
								</div>
							</div>
							<div class="form-group">
								<label ><span style="color: red;">*</span>區縣：</label>
								<div >
									<select name="area" class="form-control" data-district="---- 選擇區 ----" id="areas">
										<option value="0">--請選擇--</option>
									</select>
								</div>
								<label>郵政編號：</label>
							<div>
								<input name="zip" type="text" maxlength="6" class="form-control" placeholder="请输入郵政編號">
							</div>
							</div>
						</div>
						<div class="form-group">
							<label><span style="color: red;">*</span>詳細地址：</label>
							<div>
								<textarea name="address" class="form-control" rows="3" placeholder="输入詳細的收货地址，門牌號等"></textarea>
							</div>
						</div>
						<div class="form-group">
							<label><span style="color: red;">*</span>手機：</label>
							<div>
								<input name="phone" type="text" class="form-control" placeholder="請輸入手機號碼">
							</div>
							<label>固定電話：</label>
							<div>
								<input name="tel" type="text" class="form-control" placeholder="請輸入固定電話號碼">
							</div>
						</div>

						<div class="form-group">
							<label>地址類型：</label>
							<div>
								<input name="tag" type="text" class="form-control" placeholder="輸入地址類型，如：家、公司或者學校">
							</div>
						</div>
						<div class="form-group">

							<label><a href="address.html" style="text-decoration:none;">返回</a>&nbsp;&nbsp;&nbsp;</label>

							<div>
								<input id="btn-submit" type="button" value="保存" />

								<input type="reset" value="重置" />
							</div>
						</div>
					</form>
				</div>
			</div>
			
		</div>

		<!--尾部-->
		<footer class="footer">
			<!-- 安全保護 銀行匯款 客戶服務 -->
			<div class="foot">			
				<span class="foot-left">
					<a href="customerService.html">
						<img src="../images/index/reg1.jpg" width="20%" height="20%">
					</a>
					安全保護
				</span>
				<span class="foot-mid">
					<a href="customerService.html">
						<img src="../images/index/reg2.jpg" width="20%" height="20%">
					</a>
					銀行匯款
				</span>			
				<span class="foot-right">
					<a href="customerService.html">
						<img src="../images/index/reg3.jpg" width="20%" height="20%">
					</a>	
					客戶服務
				</span>
			</div>
			<!--公告 常見問題 聯繫我們-->
			<div class="bottom" >

				<div class="bottom-mid" >
					<div>
						<ul>
							<li><h5>公告</h5></li>
							<li><a href="customerAnnouncement.html" style="color:white;text-decoration:none;">新手指南</a></li>
							<li><a href="customerAnnouncement.html" style="color:white;text-decoration:none;">服務保障</a></li>
							<li><a href="customerAnnouncement.html" style="color:white;text-decoration:none;">常見問題</a></li>
						</ul>
					</div>
					<div>
						<ul>
							<li><h5>常見問題</h5></li>
							<li><a href="customerProblem.html" style="color:white;text-decoration:none;">個人戶實名驗證審核流程</a></li>
							<li><a href="customerProblem.html" style="color:white;text-decoration:none;">有哪些現行支付方法可以購買數位資產？</a></li>
							<li><a href="customerProblem.html" style="color:white;text-decoration:none;">如何購買數位資產？</a></li>
						</ul>
					</div>
					<div>
						<ul>
							<li><h5>聯繫我們</h5></li>
							<li>線上客服：週一至週五(例假日除外)上午十點至下午六點</li>
							<li>電話:(02)2722-xxxx</li>
							<li>信箱：sky79316@gmail.com</li>
							<li>門市地址：台北市中正區八德路X段 XXX 號</li>
						</ul>
					</div>
				</div>
			</div>
			<!-- 頁面最下 -->
			<div class="bottom-down" align="center">
				<i>關於LianExchanges&nbsp/&nbsp使用條款&nbsp/&nbsp隱私權政策&nbsp/&nbsp常見問題</i>
			</div>

		</footer>
		<!--頁面结束-->
		
	<script type="text/javascript">
	//加載省的列表
	function getProvinceList(){
		//清空當前列表
		$("#provinces").empty();
		//添加默認選項
		var op = '<option value="0">--請選擇--</option>';
		$("#provinces").append(op);
		
		// 將請求提交到哪里
		var url = "../district/list/86";
		// 發出ajax请求處理结果
		$.ajax({
			"url": url,
			"type": "POST",
			"dataType": "json",
			"success": function(json) {
				//遍歷加載新列表項
				var list = json.data;
				for(var i=0 ; i<list.length ;i++){
					console.log(list[i].code+"-"+list[i].name);
					var op = '<option value="'+list[i].code+'">'+list[i].name+'</option>';
					$("#provinces").append(op);
				}
			}
		});
	}
	
	//加載市的列表
	function getCityList(){
		//清空當前列表
		$("#cities").empty();
		//添加默認選項
		var op = '<option value="0">--請選擇--</option>';
		$("#cities").append(op);
		//獲取所選擇的省
		var code = $("#provinces").val();
		//判斷省的代號的值
		if(code == 0){
			return;
		}
		
		// 將請求提交到哪里
		var url = "../district/list/"+code;
		// 發出ajax請求處理结果
		$.ajax({
			"url": url,
			"type": "POST",
			"dataType": "json",
			"success": function(json) {			
				//遍歷加載新列表項
				var list = json.data;
				for(var i=0 ; i<list.length ;i++){
					console.log(list[i].code+"-"+list[i].name);
					var op = '<option value="'+list[i].code+'">'+list[i].name+'</option>';
					$("#cities").append(op);
				}
			}
		});
	}
	
	//加載區的列表
	function getAreaList(){
		//清空當前列表
		$("#areas").empty();
		//添加默認選項
		var op = '<option value="0">--請選擇--</option>';
		$("#areas").append(op);
		//獲取所選擇的市
		var code = $("#cities").val();
		//判斷市的代號的值
		if(code == 0){
			return;
		}
		
		// 將請求提交到
		var url = "../district/list/"+code;
		// 發出ajax請求處理结果
		$.ajax({
			"url": url,
			"type": "POST",
			"dataType": "json",
			"success": function(json) {			
				//遍歷加載新列表項
				var list = json.data;
				for(var i=0 ; i<list.length ;i++){
					console.log(list[i].code+"-"+list[i].name);
					var op = '<option value="'+list[i].code+'">'+list[i].name+'</option>';
					$("#areas").append(op);
				}
			}
		});
	}
	
	//當頁面加載完成時
	$(document).ready(function(){
		//加載省的列表
		getProvinceList();
		
		//為省的列表綁定change事件
		$("#provinces").change(function(){
			//加載市的列表
			getCityList();
			
			//清空區列表
			$("#areas").empty();
			//添加默認選項
			var op = '<option value="0">--請選擇--</option>';
			$("#areas").append(op);
		});	
		
		//為市的列表綁定change事件
		$("#cities").change(function(){
			//加載區的列表
			getAreaList();
		});	
	});
	
	
	
	
	//為提交按鈕綁事件
	$("#btn-submit").click(function() {
		//檢查提交的數據
		if($("#provinces").val() == 0){
			alert("錯誤!請選擇省!");
			return;
		}
		if($("#cities").val() == 0){
			alert("錯誤!請選擇市!");
			return;
		}
		if($("#areas").val() == 0){
			alert("錯誤!請選擇區!");
			return;
		}
		
		// 將請求提交
		var url = "../address/create";
		// 請求參數
		var data = $("#form-address").serialize();
		console.log("收貨地址参数：" + data);
		// 發出ajax請求處理结果
		$.ajax({
			"url": url,
			"data": data,
			"type": "POST",
			"dataType": "json",
			"success": function(json) {
				if (json.state == 200) {
					alert("保存成功！");
					location.href = "address.html";
				} else {
					alert(json.message);
				}
			},
			"error": function(xhr, text, errorThrown) {
				alert("您的登入信息已過期！請重新登入！");
				location.href = "login.html";
			}
		});
	});
	</script>
	</body>

</html>